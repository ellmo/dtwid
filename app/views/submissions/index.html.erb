<h1>Listing submissions</h1>

<table>
  <tr>
    <th></th>
    <th><%= sort_link 'Name', :name %></th>
    <th><%= sort_link 'Playing MapSlot', :map_episode_id, :map_slot_id %></th>
    <th><%= sort_link 'Intended MapSlot', :intended_map_episode_id, :intended_map_slot_id %></th>
    <th><%= sort_link 'Author', "map_authors.nick", "submissions.created_at" %></th>
    <th><%= sort_link 'Last Update', "submissions.updated_at" %></th>
    <th>Link</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @submissions.each_with_index do |submission, index| %>
  <%= content_tag :tr,
      :class => (((index%2 == 1) ? 'odd_row ' : 'even_row ') + submission.get_css_row_style ) do %>
    <td><%= index+1 %></td>
    <td><%= submission.name %></td>
    <td><%= "E#{submission.map_episode.id} #{submission.map_slot.name}" %></td>
    <td><%= "E#{submission.intended_map_episode.id} #{submission.intended_map_slot.name}" %></td>
    <td><%= submission.map_author.nick %></td>
    <td><%= submission.updated_at.strftime("%d-%b-%Y (%H:%M)") %></td>
    <td><%= link_to 'Download', submission.link %></td>
    <td><%= link_to 'Show', submission %></td>
    <% if can? :update, submission %>
      <td><%= link_to 'Edit', edit_submission_path(submission) %></td>
    <% end %>
    <% if can? :destroy, submission %>
      <td><%= link_to 'Destroy', submission, :confirm => 'Are you sure?', :method => :delete %></td>
    <% end %>
  <% end %>
<% end %>
</table>

<br />

<%= link_to 'New Submission', new_submission_path %>
